def rootFolder = "backend/fileprocessing"
def branchName = "main"
def projectName = "fileprocessing"
def dockerImageName = "fileprocessing"
def githubdir="https://github.com/arribajim/poc-fullstack.git"
pipeline {
    agent any
    
    environment{    
        GIT_CREDENTIALS="jenkins-dev-arribajim"
        ROOT_FOLDER="backend/fileprocessing"
    }


  stages {
    stage("checking version"){
      steps{
          sh "git --version"
          sh "java -version"
          sh "mvn -version"
          sh "docker --version"
          sh "kubectl version"

      }
    }
    stage("maven clean"){
      steps{
          sh '''
            cd ${ROOT_FOLDER}
            export $(cat .env | xargs)
            mvn clean
            '''
      }
    }
  }
}